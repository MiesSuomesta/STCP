[build]
target = "mun.json"

[unstable]
build-std = ["core", "alloc"]
build-std-features = ["compiler-builtins-mem"]

[target."mun.json"]
rustflags = [
    "-C", "panic=abort",
    "-C", "relocation-model=static",
    "-C", "code-model=kernel",
    "-C", "link-arg=-nostartfiles",
    "-C", "link-arg=-nodefaultlibs",
]

[profile.release]
opt-level = "z"
lto = true
codegen-units = 1
panic = "abort"

